pipeline{
	agent any
	environment{
something = '1.0.0'

		secret = credentials('server-password')

}
parameters{
   choice(name:'VERSION', choices:['1.1.0','1.2.0','1.3.0'], description:'')
   booleanParam(name: 'executeTests', defaultValue:true, description:'') 
}

	stages{
		stage("build"){
			steps {
		    	echo 'building app'
			echo " User env variable : ${something}"
			echo "Version can be ${params.VERSION}"
			}
		}
		stage("test"){
			when{
		        expression{ 
		            params.executeTests
		       		 }
		   	     }
		    steps{		    
		        echo 'testing app'
			    echo "Branch name: ${GIT_BRANCH}"
			    input('CONTINUE?')
			    echo "${secret}"

		        }
		    }

		
		stage("deploy"){
		    steps{
		        echo 'deploying app'
			   
		    }

		}


	
	}
	
	post{
		always{
		echo 'always runs'
		}
		failure{
		echo 'FAILED'
		}
		success{
			echo 'Success'
		}
	
	}
}



