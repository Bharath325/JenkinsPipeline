pipeline{
	agent any
	environment{
something = '1.0.0'
		secret = credentials('server-password')
}
	stages{
		stage("build"){
			steps {
		    	echo 'building app'
			echo " User env variable : ${something}"
			}
		}
		stage("test"){
		    steps{
		        echo 'testing app'
			    echo "Branch name: ${GIT_BRANCH}"
			    input('CONTINUE?')
			    echo "${secret}"
		        }
		    }

		
		stage("deploy"){
		    steps{
		        echo 'deploying app'
			    withCredentials([
				    usernamePassword(credentials:'server-password',usernameVariable: USER,passwordVariable:PWD)])
			    {
				    echo "USER ${USER} and PASS ${PWD}"
			    }
		    }

		}


	
	}
	
	post{
		always{
		echo 'always runs'
		}
		failure{
		echo 'FAILED'
		}
		success{
			echo 'Success'
		}
	
	}
}
